# XA 2PC [2 phase commit]

XA协议采用两阶段提交方式来管理分布式事务。

InnoDB支持XA协议

2PC:强一致性

事务的发起者：协调者
事务的执行者：参与者

处理流程：
1.准备阶段：协调者开始让参与者执行事务，但不提交，参与者执行完成后，给协调者返回状态
2.提交阶段：如果协调者收到失败消息或者超时消息，直接给所有参与者发送回滚，否则发送提交。

缺点：
1.依赖于数据库机制
2.一个服务调用了很多数据库，从微服务的角度来说，这么做不合规。


主线程与N个子线程
子线程在commit之前countDown，然后wait
主线程await(30s)，如果超时，设置






