# 分库分表

针对于不同场景，有不同的分库分表方案：

如果历史数据用不到，例如：会计分录流水表，这个表作用就是写多读少，每天插入数据量特别大，用于日终给大总账系统出文件。
所以历史数据几乎用不到，所以当数据量达到亿级别时，可以将表重命名，创建一个一模一样的表，用于存储新数据，而且不存在查询历史数据的功能，所以代码上也不用改动。

如果历史数据有用到，例如用户的订单信息，一个用户可以查到他自己所有的订单历史记录。

采用Hash方式分表，找到可以sharding字段。


分表框架：
MyCAT，sharding-jdbc


思考：
Customer_info表：字段：主键，身份证号，姓名，性别，地址
251156153,130125199901016666,张三,男,北京市
我们可以使用身份证前4位来分表，例如：1301
假设10亿用户，分为8个表合理，一般分为2的N次幂个，可以简化运算。

	Customer_info_0
	Customer_info_1
	Customer_info_2
	Customer_info_3
	Customer_info_4
	Customer_info_5
	Customer_info_6
	Customer_info_7

int index = 1301 % 8;
int index = (8 - 1) & 1301;
select * from db.Customer_info_5 where idNo = '130125199901016666';

1.根据身份证号来操作，解决了增删改查。
2.如果用户属于不同的产品，业务有需要导出该产品所有的用户呢？

