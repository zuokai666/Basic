
即使单核CPU的计算机也能同时运行数百个线程，但是这不过是操作系统用时间片玩的一个小把戏。一个CPU核同一时刻只能执行一个线程，然后OS切换上下文，核心执行另一个线程。

一个服务器设置的线程数，需要CPU核数，网络IO（包括三方接口，数据库访问），本地磁盘IO。

如果我们的程序中没有涉及网络与磁盘IO，那么结论就是，在N核的服务器上设置N个线程工作，在增加线程数，系统就只会更慢。

由于传统硬盘读写IO会阻塞线程，所以我们应该多设置点线程数，这样才能让线程阻塞的时候让出时间片，让其他线程执行，提高效率。

如果我们将硬盘换成了SSD固态，这时，线程数应该减少，因为阻塞变少了。

结论就是，只有当阻塞创造了更多的执行机会时，更多的线程数才能发挥出更高的性能。

PostgreSQL提供的公式：数据库连接池数目 = (核心数 * 2) + 有效磁盘数


